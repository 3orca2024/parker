
<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Nutrition Quiz Arena</title>
<style>
body{font-family:Arial;background:#f4f6f8;padding:20px;max-width:1000px;margin:auto}
h1,h2,#timer,#modeBox{text-align:center}
.question{background:#fff;padding:12px;margin:10px 0;border-radius:8px;box-shadow:0 0 5px rgba(0,0,0,.1)}
.correct{color:green}.incorrect{color:red}
button{padding:12px;font-size:16px;width:100%;margin:8px 0;cursor:pointer}
#gameBox{display:none;text-align:center}
#lives{font-size:18px}
</style>
</head>

<body>

<h1>Nutrition Quiz Arena</h1>
<h2>Select Mode</h2>

<div id="modeBox">
<button onclick="startNormal(25)">Normal ‚Äì 25</button>
<button onclick="startNormal(50)">Normal ‚Äì 50</button>
<button onclick="startNormal(75)">Normal ‚Äì 75</button>
<button onclick="startTeacher()">Teacher Mode</button>
<button onclick="startGame()">üéÆ Game Mode</button>
</div>

<div id="timer"></div>
<form id="quiz"></form>
<button id="submitBtn" onclick="checkAnswers()" style="display:none">Submit</button>
<button id="retryBtn" onclick="location.reload()" style="display:none">Restart</button>
<div id="result" class="result"></div>

<div id="gameBox">
<div id="lives">‚ù§Ô∏è‚ù§Ô∏è‚ù§Ô∏è</div>
<p id="gameQ"></p>
<div id="gameOpts"></div>
</div>

<script>
const bank=[["What is a Calorie?",["Energy in food","Fat","Protein","Water"],0],
["Major energy source?",["Proteins","Fats","Carbs","Vitamins"],2],
["Amino acids form?",["Carbs","Fats","Proteins","Minerals"],2],
["Absorbs vitamins?",["Water","Fats","Minerals","Proteins"],1],
["Act of eating?",["Digestion","Absorption","Ingestion","Elimination"],2],
["Uses enzymes?",["Mechanical","Chemical","Peristalsis","Absorption"],1],
["Most absorption?",["Stomach","Small intestine","Large intestine","Esophagus"],1],
["Peristalsis?",["Chewing","Enzymes","Muscle waves","Waste"],2],
["Removes CO2?",["Digestive","Urinary","Respiratory","Skin"],2],
["Filters blood?",["Bladder","Urethra","Kidney","Ureter"],2]
];

let quizQ=[],timerInt,timeLeft,isTeacher=false;
function shuffle(a){for(let i=a.length-1;i>0;i--){let j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}

function startNormal(n){setup(n,false)}
function startTeacher(){setup(bank.length,true)}

function setup(n,teacher){
isTeacher=teacher;
document.getElementById("modeBox").style.display="none";
quizQ=shuffle([...bank]).slice(0,n);
build();
startTimer(n*3);
}

function build(){
let q=document.getElementById("quiz");q.innerHTML="";
quizQ.forEach((x,i)=>{
let d=document.createElement("div");d.className="question";
d.innerHTML=`<p>${i+1}. ${x[0]}</p>`+
x[1].map((o,j)=>`<input type="radio" name="q${i}" value="${j}"> ${o}<br>`).join("")+
`<p id="fb${i}"></p>`;
q.appendChild(d);
});
document.getElementById("submitBtn").style.display="block";
}

function startTimer(sec){
timeLeft=sec;
timerInt=setInterval(()=>{
document.getElementById("timer").textContent="Time: "+timeLeft;
timeLeft--;
if(timeLeft<0){clearInterval(timerInt);checkAnswers();}
},1000);
}

function checkAnswers(){
clearInterval(timerInt);let s=0;
quizQ.forEach((x,i)=>{
let sel=document.querySelector(`input[name="q${i}"]:checked`);
let fb=document.getElementById("fb"+i);
if(sel&&+sel.value===x[2]){s++;fb.textContent="Correct";fb.className="correct";}
else{fb.textContent="Correct: "+x[1][x[2]];fb.className="incorrect";}
});
let p=Math.round((s/quizQ.length)*100);
document.getElementById("result").textContent=`Score ${s}/${quizQ.length} (${p}%)`;
document.getElementById("retryBtn").style.display="block";
}

/* GAME MODE */
let gIndex=0,lives=3;
function startGame(){
document.getElementById("modeBox").style.display="none";
document.getElementById("gameBox").style.display="block";
quizQ=shuffle([...bank]);gIndex=0;lives=3;
showGame();
}
function showGame(){
if(lives<=0){document.getElementById("gameQ").textContent="Game Over";return;}
let q=quizQ[gIndex];
document.getElementById("lives").textContent="‚ù§Ô∏è".repeat(lives);
document.getElementById("gameQ").textContent=q[0];
let o=document.getElementById("gameOpts");o.innerHTML="";
q[1].forEach((opt,i)=>{
let b=document.createElement("button");
b.textContent=opt;
b.onclick=()=>checkGame(i);
o.appendChild(b);
});
}
function checkGame(i){
let q=quizQ[gIndex];
if(i!==q[2]) lives--;
gIndex=(gIndex+1)%quizQ.length;
showGame();
}
</script>
</body>
</html>
